(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5404)}])},5404:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var r=n(4051),a=n.n(r),i=n(7997),o=n(1720),c=n(2293),s=n(155),u=n(8862),l=n(5282),d=n(2630),f=n(3645);function h(){return Math.floor((e=1,t=99999999999999,Math.floor(Math.random()*(t-e+1)+e)));var e,t}function p(e){return e.toString().padStart(14,"0")}function v(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){v(i,r,a,o,c,"next",e)}function c(e){v(i,r,a,o,c,"throw",e)}o(void 0)}))}}var m="random-unique-codes.txt",b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.codes=new Set}var t=e.prototype;return t.load=function(){var e=this;return g(a().mark((function t(){var n,r,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.codes.clear(),t.next=3,gapi.client.drive.files.list({fields:"files(id, name, trashed)",q:"name='".concat(m,"' and trashed=false")});case 3:if(n=t.sent,(r=n.result.files)&&!(r.length<=0)){t.next=7;break}return t.abrupt("return");case 7:if(e.fileId=r[0].id,e.fileId){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,gapi.client.drive.files.get({fileId:e.fileId,alt:"media",fields:"id"});case 12:i=t.sent,t.t0=n.status,t.next=200===t.t0?16:18;break;case 16:return e.unserialize(i.body),t.abrupt("break",19);case 18:throw new Error("Error reading file, "+i);case 19:case"end":return t.stop()}}),t)})))()},t.add=function(e){var t=this;return g(a().mark((function n(){var r,i,o,c,s,u;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(r=!0,i=!1,o=void 0,n.prev=1,c=e[Symbol.iterator]();!(r=(s=c.next()).done);r=!0)u=s.value,t.codes.add(u);n.next=9;break;case 5:n.prev=5,n.t0=n.catch(1),i=!0,o=n.t0;case 9:n.prev=9,n.prev=10,r||null==c.return||c.return();case 12:if(n.prev=12,!i){n.next=15;break}throw o;case 15:return n.finish(12);case 16:return n.finish(9);case 17:case"end":return n.stop()}}),n,null,[[1,5,9,17],[10,,12,16]])})))()},t.save=function(){var e=this;return g(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e.fileId){t.next=3;break}return t.next=3,e.createFile();case 3:return n=e.serialize(),t.next=6,gapi.client.request({path:"".concat("https://www.googleapis.com/upload/drive/v3","/files/")+e.fileId,method:"PATCH",headers:{"Content-Type":"text/plain","Content-Length":n.length},params:{uploadType:"media"},body:n});case 6:r=t.sent,t.t0=r.status,t.next=200===t.t0?10:11;break;case 10:return t.abrupt("break",12);case 11:throw new Error("Error updating database file, "+r);case 12:case"end":return t.stop()}}),t)})))()},t.createFile=function(){var e=this;return g(a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gapi.client.drive.files.create({resource:{name:m,mimeType:"text/plain",parents:["root"]},fields:"id"});case 2:n=t.sent,t.t0=n.status,t.next=200===t.t0?6:8;break;case 6:return e.fileId=n.result.id,t.abrupt("break",9);case 8:throw new Error("Error creating database file, "+n);case 9:case"end":return t.stop()}}),t)})))()},t.serialize=function(){return this.deleteInvalidCodes(),Array.from(this.codes.keys()).map((function(e){return p(e)})).join("\n")},t.unserialize=function(e){this.codes=new Set(e.split("\n").map((function(e){return parseInt(e)}))),this.deleteInvalidCodes()},t.deleteInvalidCodes=function(){this.codes.delete(NaN),this.codes.delete(0)},e}(),w=n(9334),x=function(e){var t=e.name,n=e.value,r=(0,w.t)({value:n,options:{width:2,height:100}}).inputRef;return(0,i.BX)(i.HY,{children:[(0,i.tZ)("div",{children:t}),(0,i.tZ)("svg",{ref:r})]})},k=n(2001),_=n.n(k);function y(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function Z(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){y(i,r,a,o,c,"next",e)}function c(e){y(i,r,a,o,c,"throw",e)}o(void 0)}))}}var I="843901847350-30igg13jkqtha7fnb3eh7seatf09n93t.apps.googleusercontent.com",C="https://www.googleapis.com/auth/drive.file",S=new b;var E=function(){var e=(0,o.useState)("Header"),t=e[0],n=e[1],r=(0,o.useState)(18),v=r[0],g=r[1],m=(0,o.useState)([0]),b=m[0],w=m[1],k=(0,o.useState)(!1),y=k[0],E=k[1],N=(0,o.useState)(!1),P=N[0],T=N[1],B=(0,o.useState)(""),X=B[0],z=B[1],A=y&&P,F=function(){return z("Failed loading Google Client")};function L(){return(L=Z(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y||!P){e.next=16;break}return e.prev=1,z("Fetching database..."),e.next=5,S.load();case 5:return e.next=7,S.add(b);case 7:return z("Updating database..."),e.next=10,S.save();case 10:z(""),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),z("An error ocurred while trying to sync with the cloud. Printing codes that are not stored in the cloud is not recommended.");case 16:window.print();case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}return(0,o.useEffect)((function(){gapi.load("client:auth2",{callback:Z(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gapi.client.init({clientId:I,scope:C});case 3:return E(gapi.auth2.getAuthInstance().isSignedIn.get()),gapi.auth2.getAuthInstance().isSignedIn.listen(E),e.next=7,gapi.client.load("drive","v3");case 7:T(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),F();case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),onerror:F})}),[]),(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.Z,{position:"sticky",children:(0,i.BX)(s.Z,{className:"toolbar",children:[(0,i.tZ)(u.Z,{children:"Random Barcode Generator"}),!y&&(0,i.tZ)(f.GoogleLogin,{clientId:I,buttonText:"Log in",onSuccess:function(){return E(!0)},scope:C,icon:!0,className:"google-login-button",cookiePolicy:"single_host_origin"}),y&&(0,i.tZ)(f.GoogleLogout,{clientId:I,className:"google-login-button",buttonText:"Logout"})]})}),(0,i.BX)("main",{children:[(0,i.BX)("div",{className:_().config,children:[(0,i.tZ)(l.Z,{label:"Header",type:"text",value:t,onChange:function(e){return n(e.target.value)},fullWidth:!0,size:"small"}),(0,i.tZ)(l.Z,{label:"Quantity",type:"number",inputProps:{maxLength:3},value:v,onChange:function(e){return g(parseInt(e.target.value))},fullWidth:!0,size:"small"}),(0,i.tZ)(d.Z,{variant:"contained",color:"primary",onClick:function(){w(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Array.from({length:e},(function(e,n){return n+t}))}(v).map((function(){return h()})))},fullWidth:!0,children:"Generate Barcodes"}),b[0]>0&&(0,i.BX)(d.Z,{variant:"outlined",color:"primary",onClick:function(){return L.apply(this,arguments)},fullWidth:!0,children:[A&&"Save & ","Print"]}),P&&!y&&(0,i.tZ)(u.Z,{children:"You must be logged in to prevent duplicate barcodes."}),(0,i.tZ)(u.Z,{children:X})]}),(0,i.tZ)("ul",{className:_().barcode_list,children:b.map((function(e){return(0,i.tZ)("li",{className:_().barcode_list_item,children:(0,i.tZ)(x,{name:t,value:p(e)},e)},e)}))})]}),(0,i.tZ)("footer",{children:(0,i.tZ)(u.Z,{children:"Copyright (C) 2021 Jose Torres"})})]})}},2001:function(e){e.exports={config:"index_config__vIsSv",barcode_list:"index_barcode_list__ziu80",barcode_list_item:"index_barcode_list_item__qFekF"}}},function(e){e.O(0,[305,888,179],(function(){return t=8312,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
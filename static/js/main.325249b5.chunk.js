(this["webpackJsonprandom-unique-code-generator"]=this["webpackJsonprandom-unique-code-generator"]||[]).push([[0],{57:function(e,t,n){},60:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(9),s=n.n(i),c=(n(57),n(11)),o=n.n(c),u=n(20),l=n(21),d=n(92),h=n(96),p=n(97),f=n(99),b=n(98),j=n(29);function g(){return Math.floor((e=1,t=99999999999999,Math.floor(Math.random()*(t-e+1)+e)));var e,t}var v=n(38),m=n(39),x=n(40),O="random-unique-codes.txt",w=function(){function e(){Object(m.a)(this,e),this.fileId=void 0,this.numbers=new Set,this.setMessage=function(){}}return Object(x.a)(e,[{key:"init",value:function(e){this.setMessage=e}},{key:"load",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.numbers.clear(),e.next=3,gapi.client.drive.files.list({fields:"files(id, name, trashed)",q:"name='".concat(O,"' and trashed=false")});case 3:if(t=e.sent,(n=t.result.files)&&!(n.length<=0)){e.next=7;break}return e.abrupt("return");case 7:if(this.fileId=n[0].id,this.fileId){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,gapi.client.drive.files.get({fileId:this.fileId,alt:"media",fields:"id"});case 12:r=e.sent,e.t0=t.status,e.next=200===e.t0?16:18;break;case 16:return this.numbers=new Set(r.body.split("\n").map((function(e){return parseInt(e)}))),e.abrupt("break",19);case 18:throw new Error("Error reading file, "+r);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addNumbers",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setMessage("Fetching database..."),e.next=3,this.load();case 3:n=Object(v.a)(t);try{for(n.s();!(r=n.n()).done;)a=r.value,this.numbers.add(a)}catch(i){n.e(i)}finally{n.f()}return e.next=7,this.save();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setMessage("Updating database..."),this.numbers.delete(NaN),this.numbers.delete(0),t=Array.from(this.numbers.keys()).map((function(e){return e.toString().padStart(14,"0")})).join("\n"),void 0!==this.fileId){e.next=14;break}return e.next=7,gapi.client.drive.files.create({resource:{name:O,mimeType:"text/plain",parents:["root"]},fields:"id"});case 7:n=e.sent,e.t0=n.status,e.next=200===e.t0?11:13;break;case 11:return this.fileId=n.result.id,e.abrupt("break",14);case 13:throw new Error("Error creating database file, "+n);case 14:return e.next=16,gapi.client.request({path:"".concat("https://www.googleapis.com/upload/drive/v3","/files/")+this.fileId,method:"PATCH",headers:{"Content-Type":"text/plain","Content-Length":t.length},params:{uploadType:"media"},body:t});case 16:r=e.sent,e.t1=r.status,e.next=200===e.t1?20:21;break;case 20:return e.abrupt("break",22);case 21:throw new Error("Error updating database file, "+r);case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();var y=n(41),k=n(6),I=function(e){var t=e.name,n=e.value,r=Object(y.a)({value:n,options:{width:2,height:100}}).inputRef;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{children:t}),Object(k.jsx)("svg",{ref:r})]})},S=(n(60),"843901847350-30igg13jkqtha7fnb3eh7seatf09n93t.apps.googleusercontent.com"),C="https://www.googleapis.com/auth/drive.file",E=new w;var M=function(){var e=Object(r.useState)("Header"),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(18),s=Object(l.a)(i,2),c=s[0],v=s[1],m=Object(r.useState)([0]),x=Object(l.a)(m,2),O=x[0],w=x[1],y=Object(r.useState)(),M=Object(l.a)(y,2),N=M[0],T=M[1],q=Object(r.useState)(!1),A=Object(l.a)(q,2),G=A[0],L=A[1],P=Object(r.useState)(""),F=Object(l.a)(P,2),W=F[0],B=F[1],H=function(){return B("Failed loading Google Client")};function J(){return(J=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N||!G){e.next=10;break}return e.prev=1,e.next=4,E.addNumbers(O);case 4:B(""),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),B("An error ocurred while trying to sync with the cloud. Printing codes that are not stored in the cloud is not recommended.");case 10:window.print();case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){E.init(B),gapi.load("client:auth2",{callback:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gapi.client.init({clientId:S,scope:C});case 3:return gapi.auth2.getAuthInstance().isSignedIn.listen(T),T(gapi.auth2.getAuthInstance().isSignedIn.get()),e.next=7,gapi.client.load("drive","v3");case 7:L(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),H();case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),onerror:H})}),[]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(d.a,{position:"static",children:Object(k.jsxs)(h.a,{className:"toolbar",children:[Object(k.jsx)(p.a,{variant:"h6",children:"Random Barcode Generator"}),Object(k.jsxs)(f.a,{color:"inherit",children:[" ",!N&&Object(k.jsx)(j.GoogleLogin,{clientId:S,buttonText:"Log in with Google",onSuccess:function(){return T(!0)},scope:C,cookiePolicy:"single_host_origin"}),N&&Object(k.jsx)(j.GoogleLogout,{clientId:S,buttonText:"Logout"})]})]})}),Object(k.jsxs)("main",{children:[Object(k.jsxs)("div",{className:"generator-config",children:[Object(k.jsx)(b.a,{label:"Header",type:"text",value:n,onChange:function(e){return a(e.target.value)},fullWidth:!0}),Object(k.jsx)(b.a,{label:"Quantity",type:"number",inputProps:{maxLength:3},value:c,onChange:function(e){return v(parseInt(e.target.value))},fullWidth:!0}),Object(k.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){w(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Array.from({length:e},(function(e,n){return n+t}))}(c).map((function(){return g()})))},fullWidth:!0,children:"Generate Barcodes"}),O.length>0&&0!==O[0]&&Object(k.jsxs)(f.a,{variant:"outlined",color:"primary",onClick:function(){return J.apply(this,arguments)},fullWidth:!0,children:[N&&G&&"Save & ","Print"]}),void 0!==N&&!N&&Object(k.jsx)("p",{children:"You must be logged in to prevent duplicate numbers."}),Object(k.jsx)("p",{children:W})]}),Object(k.jsx)("ul",{className:"code-list",children:O.map((function(e){return Object(k.jsx)("li",{className:"code-list-item",children:Object(k.jsx)(I,{name:n,value:e.toString().padStart(14,"0")},e)},e)}))})]}),Object(k.jsx)("footer",{children:"Copyright (C) 2021 Jose Torres"})]})};s.a.render(Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsx)(M,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.325249b5.chunk.js.map
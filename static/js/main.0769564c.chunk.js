(this["webpackJsonprandom-barcode-generator"]=this["webpackJsonprandom-barcode-generator"]||[]).push([[0],{61:function(e,t,n){},64:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(9),c=n.n(i),s=(n(61),n(11)),o=n.n(s),u=n(18),l=n(21),d=n(96),h=n(100),f=n(101),p=n(103),b=n(104),j=n(29);function g(){return Math.floor((e=1,t=99999999999999,Math.floor(Math.random()*(t-e+1)+e)));var e,t}var v=n(41),x=n(42),m=n(43);function O(e){return e.toString().padStart(14,"0")}var y="random-unique-codes.txt",k=function(){function e(){Object(x.a)(this,e),this.fileId=void 0,this.codes=new Set}return Object(m.a)(e,[{key:"load",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.codes.clear(),e.next=3,gapi.client.drive.files.list({fields:"files(id, name, trashed)",q:"name='".concat(y,"' and trashed=false")});case 3:if(t=e.sent,(n=t.result.files)&&!(n.length<=0)){e.next=7;break}return e.abrupt("return");case 7:if(this.fileId=n[0].id,this.fileId){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,gapi.client.drive.files.get({fileId:this.fileId,alt:"media",fields:"id"});case 12:r=e.sent,e.t0=t.status,e.next=200===e.t0?16:18;break;case 16:return this.unserialize(r.body),e.abrupt("break",19);case 18:throw new Error("Error reading file, "+r);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(v.a)(t);try{for(n.s();!(r=n.n()).done;)a=r.value,this.codes.add(a)}catch(i){n.e(i)}finally{n.f()}case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.fileId){e.next=3;break}return e.next=3,this.createFile();case 3:return t=this.serialize(),e.next=6,gapi.client.request({path:"".concat("https://www.googleapis.com/upload/drive/v3","/files/")+this.fileId,method:"PATCH",headers:{"Content-Type":"text/plain","Content-Length":t.length},params:{uploadType:"media"},body:t});case 6:n=e.sent,e.t0=n.status,e.next=200===e.t0?10:11;break;case 10:return e.abrupt("break",12);case 11:throw new Error("Error updating database file, "+n);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createFile",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.client.drive.files.create({resource:{name:y,mimeType:"text/plain",parents:["root"]},fields:"id"});case 2:t=e.sent,e.t0=t.status,e.next=200===e.t0?6:8;break;case 6:return this.fileId=t.result.id,e.abrupt("break",9);case 8:throw new Error("Error creating database file, "+t);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialize",value:function(){return this.deleteInvalidCodes(),Array.from(this.codes.keys()).map((function(e){return O(e)})).join("\n")}},{key:"unserialize",value:function(e){this.codes=new Set(e.split("\n").map((function(e){return parseInt(e)}))),this.deleteInvalidCodes()}},{key:"deleteInvalidCodes",value:function(){this.codes.delete(NaN),this.codes.delete(0)}}]),e}(),w=n(44),I=n(6),S=function(e){var t=e.name,n=e.value,r=Object(w.a)({value:n,options:{width:2,height:100}}).inputRef;return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{children:t}),Object(I.jsx)("svg",{ref:r})]})},C=(n(64),"843901847350-30igg13jkqtha7fnb3eh7seatf09n93t.apps.googleusercontent.com"),E="https://www.googleapis.com/auth/drive.file",N=new k;var T=function(){var e=Object(r.useState)("Header"),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(18),c=Object(l.a)(i,2),s=c[0],v=c[1],x=Object(r.useState)([0]),m=Object(l.a)(x,2),y=m[0],k=m[1],w=Object(r.useState)(!1),T=Object(l.a)(w,2),A=T[0],F=T[1],L=Object(r.useState)(!1),G=Object(l.a)(L,2),P=G[0],q=G[1],z=Object(r.useState)(""),M=Object(l.a)(z,2),W=M[0],B=M[1],H=A&&P,J=function(){return B("Failed loading Google Client")};function R(){return(R=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!A||!P){e.next=16;break}return e.prev=1,B("Fetching database..."),e.next=5,N.load();case 5:return e.next=7,N.add(y);case 7:return B("Updating database..."),e.next=10,N.save();case 10:B(""),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),B("An error ocurred while trying to sync with the cloud. Printing codes that are not stored in the cloud is not recommended.");case 16:window.print();case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){gapi.load("client:auth2",{callback:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gapi.client.init({clientId:C,scope:E});case 3:return F(gapi.auth2.getAuthInstance().isSignedIn.get()),gapi.auth2.getAuthInstance().isSignedIn.listen(F),e.next=7,gapi.client.load("drive","v3");case 7:q(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),J();case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),onerror:J})}),[]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(d.a,{position:"sticky",children:Object(I.jsxs)(h.a,{className:"toolbar",children:[Object(I.jsx)(f.a,{children:"Random Barcode Generator"}),!A&&Object(I.jsx)(j.GoogleLogin,{clientId:C,buttonText:"Log in",onSuccess:function(){return F(!0)},scope:E,icon:!0,className:"google-login-button",cookiePolicy:"single_host_origin"}),A&&Object(I.jsx)(j.GoogleLogout,{clientId:C,className:"google-login-button",buttonText:"Logout"})]})}),Object(I.jsxs)("main",{children:[Object(I.jsxs)("div",{className:"config",children:[Object(I.jsx)(p.a,{label:"Header",type:"text",value:n,onChange:function(e){return a(e.target.value)},fullWidth:!0}),Object(I.jsx)(p.a,{label:"Quantity",type:"number",inputProps:{maxLength:3},value:s,onChange:function(e){return v(parseInt(e.target.value))},fullWidth:!0}),Object(I.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){k(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Array.from({length:e},(function(e,n){return n+t}))}(s).map((function(){return g()})))},fullWidth:!0,children:"Generate Barcodes"}),y[0]>0&&Object(I.jsxs)(b.a,{variant:"outlined",color:"primary",onClick:function(){return R.apply(this,arguments)},fullWidth:!0,children:[H&&"Save & ","Print"]}),P&&!A&&Object(I.jsx)(f.a,{children:"You must be logged in to prevent duplicate barcodes."}),Object(I.jsx)(f.a,{children:W})]}),Object(I.jsx)("ul",{className:"barcode-list",children:y.map((function(e){return Object(I.jsx)("li",{className:"barcode-list-item",children:Object(I.jsx)(S,{name:n,value:O(e)},e)},e)}))})]}),Object(I.jsx)("footer",{children:Object(I.jsx)(f.a,{children:"Copyright (C) 2021 Jose Torres"})})]})},A=n(102),F=n(50);c.a.render(Object(I.jsx)(a.a.StrictMode,{children:Object(I.jsx)(A.a,{theme:Object(F.a)({palette:{primary:{main:"#101010"}}}),children:Object(I.jsx)(T,{})})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.0769564c.chunk.js.map